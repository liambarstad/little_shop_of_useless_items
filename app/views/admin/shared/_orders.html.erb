<table class="table table-striped text-left table-bordered">
  <tr>
    <th>Order ID</th>
    <th>Full Name</th>
    <th>Address</th>
    <th>Item</th>
    <th>Quantity</th>
    <th>Total Price</th>
    <th>Status</th>
    <th>Change to Paid/Completed</th>
    <th>Cancel Order</th>
  </tr>
  <tbody>
    <tr><% @store_orders.each do |store_order| %></tr>
    <td><%= store_order.order.id %></td>
    <td><%= store_order.order.user.full_name %></td>
    <td><%= store_order.order.user.address %></td>
    <td><%= store_order.item.title %>
    <td><%= store_order.quantity %></td>
    <td><%= number_to_currency(store_order.line_item_total) %></td>
    <td><%= store_order.status.capitalize %></td>
    <% @order = store_order %>
    <td><% if @order.ordered? %>
          <%= button_to "Paid", admin_order_item_path(@order, status: "paid"), method: :patch, class: "btn btn-primary" %>
        <% end %>
        <% if @order.paid? %>
          <%= button_to "Completed", admin_order_item_path(@order, status: "completed"), method: :patch, class: "btn btn-primary" %>
        <% end %>
    </td>
    <td>
      <% if store_order.ordered? || store_order.paid? %>
        <%= button_to "Cancel", admin_order_item_path(@order, status: "cancelled"), method: :patch, class: "btn btn-danger" %>
      <% end %>
    </td>
    <% end %>
  </tbody>
</table>


<table class="table table-striped text-left table-bordered">
  <thead><strong>Orders By Status</strong></thead>
  <tr>
    <th><%= link_to 'Ordered', admin_ordered_path %></th>
    <th><%= link_to 'Paid', admin_paid_path %></th>
    <th><%= link_to 'Cancelled', admin_cancelled_path %></th>
    <th><%= link_to 'Completed', admin_completed_path %></th>
  </tr>
  <tbody>
    <tr>
      <td><%= @store_orders.ordered_count %></td>
      <td><%= @store_orders.paid_count %></td>
      <td><%= @store_orders.cancelled_count %></td>
      <td><%= @store_orders.completed_count %></td>
    </tr>
  </tbody>
</table>
